{"version":3,"sources":["Button.jsx","RoundedButton.jsx","SquareContainer.jsx","SettingItem.jsx","hooks.js","InputForm.jsx","util.js","InputPage.jsx","Result.jsx","ResultGuide.jsx","ResultPage.jsx","reducer.js","defaultState.js","App.js","serviceWorker.js","index.js"],"names":["React","forwardRef","props","ref","className","SquareContainer","square","other","SettingItem","name","children","end","useTitle","title","useEffect","document","useAction","type","dispatch","useContext","DispatchContext","useCallback","payload","useSelector","selector","AppContext","InputForm","onSubmit","state","settings","defaultWidth","width","defaultInitialColor","initialColor","defaultInitialEdge","initialEdge","defaultIterationCount","iterationCount","defaultSampleDistance","sampleDistance","useState","imageWidth","setImageWidth","imageHeight","setImageHeight","tileWidthCount","setTileWidthCount","nextIndex","length","color","map","value","index","reduce","a","b","Object","assign","id","Array","fill","setInitialColor","edge","setInitialEdge","imageData","setImageData","setIterationCount","setSampleDistance","canvasRef","useRef","fileInputRef","handleFileButtonClick","event","preventDefault","current","click","handleFileInputChange","reader","FileReader","onload","image","src","result","readAsDataURL","target","files","Image","height","context","getContext","drawImage","getImageData","data","handleTileWidthCountChange","handleColorChange","prev","newColor","handleAddColor","handleRemoveColor","prevId","prevColor","pop","lastId","handleEdgeChange","newEdge","handleAddEdge","handleRemoveEdge","prevEdge","handleIterationCountChange","handleSampleDistanceChange","handleSubmit","Number","values","onChange","Button","onClick","RoundedButton","_id","key","disabled","toString","getMedian","edges","rValues","gValues","bValues","aValues","totalCount","currentCount","i","euclideanDistance","slice","forEach","array","count","getSimplifiedImage","async","tileSize","Math","floor","newData","j","k","l","pixel","push","from","concat","x","y","sum","toRGB","alpha","getClusteredImage","matrix","Promise","resolve","clusterize","getResult","centroid","types","splice","repeat","fn","times","distance","initialVector","newCentroidSum","newCentroidCount","item","minIndex","minValue","c","dist","findType","InputPage","history","useHistory","saveSettings","convertedPixel","pathname","Result","rows","style","backgroundColor","paddingBottom","flex","ResultGuide","mapping","keys","minWidth","minHeight","border","marginRight","ResultPage","convert","parseInt","substr","rawInitialColor","rawInitialEdge","useMemo","clustered","getImage","colorString","goBack","reducer","action","defaultState","createContext","App","useReducer","Provider","basename","process","exact","path","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2a90b0d3.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default React.forwardRef((props, ref) => {\n    return (\n        <button ref={ref} {...props} className=\"button\" />\n    );\n});","import React from \"react\";\n\nexport default React.forwardRef((props, ref) => {\n    return (\n        <button ref={ref} {...props} className=\"button rounded\" />\n    );\n});","import React from \"react\";\n\nimport \"./SquareContainer.css\";\n\nexport default function SquareContainer({square, other}) {\n    return (\n        <div className=\"square-container\">\n            <div className=\"square-other\">{other}</div>\n            <div className=\"square-block\">{square}</div>\n        </div>\n    );\n}","import React from 'react';\n\nimport \"./SettingItem.css\";\n\nexport default function SettingItem({name, children, end}) {\n    return (\n        <div className=\"flex-container\">\n            <p className=\"flex-fixed setting-name\">{name}</p>\n            <div className=\"flex-expand\">{children}</div>\n            <div className=\"flex-fixed setting-end\">{end}</div>\n        </div>\n    );\n}","import { useEffect, useContext, useCallback } from 'react';\n\nimport { AppContext, DispatchContext } from './App';\n\nexport const useTitle = (title) => {\n    useEffect(() => {\n        document.title = title;\n    }, [title]);\n};\n\nexport const useAction = (type) => {\n    const dispatch = useContext(DispatchContext);\n    \n    return useCallback((payload) => {\n        dispatch({\n            type,\n            payload,\n        });\n    }, [dispatch, type]);\n};\n\nexport const useSelector = (selector) => {\n    const state = useContext(AppContext);\n    \n    return selector(state);\n};","import React, { useCallback, useState, useRef } from \"react\";\nimport \"./InputPage.css\";\nimport Button from \"./Button\";\nimport RoundedButton from \"./RoundedButton\";\nimport SquareContainer from \"./SquareContainer\";\nimport SettingItem from \"./SettingItem\";\nimport { useSelector } from './hooks';\n\nexport default function InputForm({onSubmit}) {\n    const {\n        width: defaultWidth,\n        initialColor: defaultInitialColor,\n        initialEdge: defaultInitialEdge,\n        iterationCount: defaultIterationCount,\n        sampleDistance: defaultSampleDistance,\n    } = useSelector((state) => state.settings);\n    const [imageWidth, setImageWidth] = useState(0);\n    const [imageHeight, setImageHeight] = useState(0);\n    const [tileWidthCount, setTileWidthCount] = useState(defaultWidth);\n    const [initialColor, setInitialColor] = useState({\n        nextIndex: defaultInitialColor.length,\n        color: defaultInitialColor.map((value, index) => ({[index]: value})).reduce((a, b) => Object.assign({}, a, b), {}),\n        id: new Array(defaultInitialColor.length).fill(0).map((value, index) => index),\n    });\n    const [initialEdge, setInitialEdge] = useState({\n        nextIndex: defaultInitialEdge.length,\n        edge: defaultInitialEdge.map((value, index) => ({[index]: value})).reduce((a, b) => Object.assign({}, a, b), {}),\n        id: new Array(defaultInitialEdge.length).fill(0).map((value, index) => index),\n    });\n    const [imageData, setImageData] = useState();\n    const [iterationCount, setIterationCount] = useState(defaultIterationCount);\n    const [sampleDistance, setSampleDistance] = useState(defaultSampleDistance);\n    const canvasRef = useRef();\n    const fileInputRef = useRef();\n    const handleFileButtonClick = useCallback((event) => {\n        event.preventDefault();\n        fileInputRef.current.click();\n    }, [fileInputRef]);\n    const handleFileInputChange = useCallback((event) => {\n        const reader = new FileReader();\n        reader.onload = () => image.src = reader.result;\n        reader.readAsDataURL(event.target.files[0]);\n        const image = new Image();\n        image.onload = () => {\n            setImageWidth(image.width);\n            setImageHeight(image.height);\n            if (canvasRef.current) {\n                const context = canvasRef.current.getContext('2d');\n                context.drawImage(image, 0, 0, image.width, image.height);\n                setImageData(context.getImageData(0, 0, image.width, image.height).data);\n            }\n        };\n    }, [canvasRef, setImageData, setImageWidth, setImageHeight]);\n    const handleTileWidthCountChange = useCallback((event) => {\n        setTileWidthCount(event.target.value);\n    }, [setTileWidthCount]);\n    const handleColorChange = useCallback((event) => {\n        event.preventDefault();\n        const name = event.target.name;\n        const value = event.target.value;\n        setInitialColor((prev) => {\n            const newColor = Object.assign({}, prev.color);\n            newColor[name] = value;\n            return {\n                ...prev, color: newColor,\n            }\n        });\n    }, [setInitialColor]);\n    const handleAddColor = useCallback((event) => {\n        event.preventDefault();\n        setInitialColor((prev) => ({\n            ...prev,\n            nextIndex: prev.nextIndex +1,\n            id: [...prev.id, prev.nextIndex],\n            color: {...prev.color, [prev.nextIndex]: '#000000'},\n        }));\n    }, [setInitialColor]);\n    const handleRemoveColor = useCallback((event) => {\n        event.preventDefault();\n        setInitialColor((prev) => {\n            const prevId = prev.id;\n            const lastId = prevId.pop();\n            const prevColor = prev.color;\n            delete prevColor.lastId;\n            return {\n                ...prev,\n                color: prevColor,\n                id: prevId,\n            };\n        });\n    }, [setInitialColor]);\n    const handleEdgeChange = useCallback((event) => {\n        event.preventDefault();\n        const name = event.target.name;\n        const value = event.target.value;\n        setInitialEdge((prev) => {\n            const newEdge = Object.assign({}, prev.edge);\n            newEdge[name] = value;\n            return {\n                ...prev, edge: newEdge,\n            }\n        });\n    }, [setInitialEdge]);\n    const handleAddEdge = useCallback((event) => {\n        event.preventDefault();\n        setInitialEdge((prev) => ({\n            ...prev,\n            nextIndex: prev.nextIndex +1,\n            id: [...prev.id, prev.nextIndex],\n            edge: {...prev.edge, [prev.nextIndex]: '#000000'},\n        }));\n    }, [setInitialEdge]);\n    const handleRemoveEdge = useCallback((event) => {\n        event.preventDefault();\n        setInitialEdge((prev) => {\n            const prevId = prev.id;\n            const lastId = prevId.pop();\n            const prevEdge = prev.edge;\n            delete prevEdge.lastId;\n            return {\n                ...prev,\n                edge: prevEdge,\n                id: prevId,\n            };\n        });\n    }, [setInitialEdge]);\n    const handleIterationCountChange = useCallback((event) => {\n        event.preventDefault();\n        setIterationCount(event.target.value);\n    }, []);\n    const handleSampleDistanceChange = useCallback((event) => {\n        event.preventDefault();\n        setSampleDistance(event.target.value);\n    }, []);\n    const handleSubmit = useCallback((event) => {\n        event.preventDefault();\n        onSubmit && onSubmit(\n            imageData,\n            imageWidth,\n            imageHeight,\n            Number(tileWidthCount),\n            Object.values(initialColor.color),\n            Object.values(initialEdge.edge),\n            Number(iterationCount),\n            Number(sampleDistance),\n        );\n    }, [\n        onSubmit,\n        tileWidthCount,\n        imageData,\n        imageWidth,\n        imageHeight,\n        initialColor,\n        initialEdge,\n        iterationCount,\n        sampleDistance\n    ]);\n    \n    return (\n        <SquareContainer\n            other={<form className=\"form\" onSubmit={handleSubmit}>\n                <div className=\"normal-padding\">\n                    <h3>Instructions:</h3>\n                    <p>Select an image with few colors and sufficiently wide margin.</p>\n                    <p>Choose the main colors in the image.</p>\n                    <p>Choose the color of the edge if necessary.</p>\n                    <p>Increase sample distance if the calculation is too slow.</p>\n                </div>\n                <SettingItem name=\"Image\">\n                    <input className=\"hidden\" ref={fileInputRef} type=\"file\" onChange={handleFileInputChange} />\n                    <Button onClick={handleFileButtonClick}>Choose an image</Button>\n                </SettingItem>\n                <SettingItem name=\"Tile width\">\n                    <input\n                        type=\"number\"\n                        onChange={handleTileWidthCountChange}\n                        value={tileWidthCount}\n                    />\n                </SettingItem>\n                <SettingItem name=\"Iteration Count\">\n                    <input\n                        type=\"number\"\n                        onChange={handleIterationCountChange}\n                        value={iterationCount}\n                    />\n                </SettingItem>\n                <SettingItem name=\"Sample Distance\">\n                    <input\n                        type=\"number\"\n                        onChange={handleSampleDistanceChange}\n                        value={sampleDistance}\n                    />\n                </SettingItem>\n                <SettingItem name=\"Color\" end={\n                    <>\n                        <RoundedButton onClick={handleAddColor}>+</RoundedButton>\n                        <RoundedButton onClick={handleRemoveColor}>-</RoundedButton>\n                    </>\n                }>\n                    {initialColor.id.map((_id) =>\n                        <input\n                            key={`color_${_id}`}\n                            type=\"color\"\n                            value={initialColor.color[_id]}\n                            name={_id}\n                            onChange={handleColorChange}\n                        />\n                    )}\n                </SettingItem>\n                <SettingItem name=\"Edge\" end={\n                    <>\n                        <RoundedButton onClick={handleAddEdge}>+</RoundedButton>\n                        <RoundedButton onClick={handleRemoveEdge}>-</RoundedButton>\n                    </>}>\n                    {initialEdge.id.map((_id) =>\n                        <input\n                            key={`edge_${_id}`}\n                            type=\"color\"\n                            value={initialEdge.edge[_id]}\n                            name={_id}\n                            onChange={handleEdgeChange}\n                        />\n                    )}\n                </SettingItem>\n                <div className=\"normal-padding\">\n                    <Button disabled={!imageData} type=\"submit\">\n                        Submit\n                    </Button>\n                </div>\n            </form>}\n            square={\n                <div className=\"overflow-scroll full\">\n                    <canvas\n                        ref={canvasRef}\n                        width={imageWidth.toString()}\n                        height={imageHeight.toString()}\n                    />\n                </div>\n            }\n        />    \n    );\n}","export function averageData(data) {\n    var sumR = 0;\n    var sumG = 0;\n    var sumB = 0;\n    var sumAlpha = 0;\n    const length = data.length / 4;\n    data.forEach((value, index) => {\n        switch (index % 4) {\n            case 0:\n                sumR += value;\n                break;\n                \n            case 1:\n                sumG += value;\n                break;\n                \n            case 2:\n                sumB += value;\n                break;\n                \n            case 3:\n                sumAlpha += value;\n                break;\n                \n            default:\n                break;\n        }\n    });\n    return [sumR, sumG, sumB, sumAlpha].map((value) => value/length);\n}\n\nexport function getMedian(data, edges) {\n    // rValue means r in rgba, not related to l-values and r-values\n    const rValues = new Array(256).fill(0);\n    const gValues = new Array(256).fill(0);\n    const bValues = new Array(256).fill(0);\n    const aValues = new Array(256).fill(0);\n    \n    for (const edge of edges) {\n        const totalCount = data.length / 4;\n        let currentCount = 0;\n        for (let i=0; i<data.length; i+=4) {\n            const pixel = data.slice(i, i+4);\n            if (euclideanDistance(pixel, edge) < 30) {\n                currentCount++;\n            }\n        }\n        if (currentCount > 0.03 * totalCount) {\n            return edge;\n        }\n    }\n    \n    data.forEach((value, index) => {\n        switch (index % 4) {\n            case 0:\n                rValues[value]++;\n                break;\n                \n            case 1:\n                gValues[value]++;\n                break;\n                \n            case 2:\n                bValues[value]++;\n                break;\n                \n            case 3:\n                aValues[value]++;\n                break;\n                \n            default:\n                break;\n        }\n    });\n    \n    return [rValues, gValues, bValues, aValues].map((array) => {\n        let count = 0;\n        for (let i=0; i<256; i++) {\n            count += array[i];\n            if (count >= data.length / 8) {\n                return i;\n            }\n        }\n        return 255;\n    })\n}\n\nexport async function getSimplifiedImage(data, imageWidth, imageHeight, width, sampleDistance, initialEdge) {\n    const tileSize = Math.floor(imageWidth/width);\n    const height = Math.floor(imageHeight/tileSize);\n    const newData = new Array(width*height);\n    // truncate image at bottom\n    for (var i=0; i<height; i++) {\n        for (var j=0; j<width; j++) {\n            // find out which tile the pixel belongs to\n            for (var k=i*tileSize; k<(i+1)*tileSize; k+=sampleDistance) {\n                for (var l=j*tileSize; l<(j+1)*tileSize; l+=sampleDistance) {\n                    if (!newData[i*width+j]) {\n                        newData[i*width+j] = [];\n                    }\n                    const pixel = k*imageWidth + l;\n                    newData[i*width+j].push(data.slice(4*pixel, 4*pixel+4));\n                }\n            }\n        }\n    }\n    return newData.map((array) => getMedian(array.reduce((a, b) => Array.from(a).concat(Array.from(b))), initialEdge))\n                  .reduce((a, b) => a.concat(b));\n}\n\nfunction euclideanDistance(x, y) {\n    let sum = 0;\n    for (let i=0; i<3; i++) {\n        sum += (x[i] - y[i]) * (x[i] - y[i]);\n    }\n    return sum;\n}\n    \nexport function toRGB(pixel) {\n    const alpha = pixel[3]/255;\n    return alpha ? [pixel[0]*alpha, pixel[1]*alpha, pixel[2]*alpha, 255] : new Array(4).fill(255);\n};\n\nexport async function getClusteredImage(data, initialColor, iterationCount) {\n    const matrix = [];\n    \n    for (var i=0; i<data.length; i+=4) {\n        matrix.push(toRGB(data.slice(i, i+4)));\n    }\n    return new Promise((resolve) => resolve(clusterize(matrix, euclideanDistance, initialColor, iterationCount)));\n}\n\nexport async function getResult(data, initialColor, iterationCount) {\n    const { centroid, types } = await getClusteredImage(data, initialColor, iterationCount);\n    for (const index in types) {\n        data.splice(index*4, 4, ...centroid[types[index]]);\n    }\n    return await data;\n}\n\nconst repeat = (fn, times) => {\n    for (let i=0; i<times; i++) {\n        fn(i);\n    }\n};\n\nexport function clusterize(matrix, distance, initialVector, iterationCount) {\n    let centroid = initialVector;\n    const types = matrix.map((color, index) => 0);\n    const findType = (item, centroid, distance) => {\n        let minIndex = -1;\n        let minValue = -1;\n        centroid.forEach((c, index) => {\n            const dist = distance(item, c);\n            if (dist < minValue || minValue === -1) {\n                minIndex = index;\n                minValue = dist;\n            }\n        });\n        return minIndex;\n    };\n    const k = initialVector.length;\n    repeat(() => {\n        const newCentroidSum = new Array(k).fill(new Array(initialVector[0].length).fill(0));\n        const newCentroidCount = new Array(k).fill(0);\n        for (let i=0; i<matrix.length; i++) {\n            const type = findType(matrix[i], centroid, distance);\n            types[i] = type;\n            newCentroidSum[type] = newCentroidSum[type].map((value, index) => value + matrix[i][index]);\n            newCentroidCount[type]++;\n        }\n        centroid = newCentroidSum.map((value, type) => {\n            if (newCentroidCount[type] !== 0) {\n                return value.map((color) => color / newCentroidCount[type]);\n            } else {\n                return centroid[type];\n            }\n        });\n    }, iterationCount);\n    return { centroid, types };\n}\n","import React, { useCallback } from \"react\";\nimport InputForm from \"./InputForm\";\nimport { useTitle, useAction } from \"./hooks\";\nimport { toRGB } from \"./util\";\n\nimport { useHistory } from 'react-router-dom';\n\nexport default function InputPage(props) {\n    const history = useHistory();\n    const saveSettings = useAction('save_settings');\n    const onSubmit = useCallback(\n        (\n            data,\n            imageWidth,\n            imageHeight,\n            width,\n            initialColor,\n            initialEdge,\n            iterationCount,\n            sampleDistance\n        ) => {\n        saveSettings({\n            data,\n            imageWidth,\n            imageHeight,\n            width,\n            initialColor,\n            initialEdge,\n            iterationCount,\n            sampleDistance,\n        });\n        for (let i=0; i<data.length; i+=4) {\n            const convertedPixel = toRGB(data.slice(i, i+4));\n            data[i] = convertedPixel[0];\n            data[i+1] = convertedPixel[1];\n            data[i+2] = convertedPixel[2];\n            data[i+3] = convertedPixel[3];\n        }\n        history.push({\n            pathname: \"/result\",\n        });\n    }, [history, saveSettings]);\n    \n    useTitle(\"Pixelator\");\n    \n    return (\n        <div className=\"container\">\n            <InputForm onSubmit={onSubmit} />\n        </div>\n    );\n}","import React from 'react';\nimport './Result.css';\n\nexport default function Result(props) {\n    const { data, width, height } = props;\n    if (!data) return <div />;\n    const rows = [];\n    for (var i=0; i<height; i++) {\n        rows.push([]);\n        for (var j=0; j<width; j++) {\n            const index = 4*(i*width+j);\n            const pixel = data.slice(index, index+4);\n            rows[i].push(\n                <div key={`${i} ${j}`} style={\n                    {\n                        backgroundColor: `rgb(${pixel[0]}, ${pixel[1]}, ${pixel[2]}, ${pixel[3]})`,\n                        width: `calc(100% / ${width})`,\n                        paddingBottom: `calc(100% / ${width})`,\n                        flex: \"0 0 auto\",\n                    }\n                } />\n            )\n        }\n    }\n    \n    return (\n        <div className=\"result-container\">\n            {rows.map(((array, index) => \n                <div className=\"result-line\" key={index.toString()}>{array}</div>      \n            ))}\n        </div>\n    )\n}","import React from \"react\";\n\nimport \"./ResultGuide.css\";\n\nexport default function ResultGuide({mapping}) {\n    return (\n        <div className=\"result-guide-container\">\n            {Object.keys(mapping).map((color) =>\n                <div\n                    key={color.toString()}\n                    className=\"result-guide-item\"\n                >\n                    <div style={{\n                        backgroundColor: color,\n                        width: \"50px\",\n                        height: \"50px\",\n                        minWidth: \"50px\",\n                        minHeight: \"50px\",\n                        border: \"1px solid black\",\n                        marginRight: \"8px\",\n                    }}/>\n                    <p>{mapping[color]}</p>\n                </div>\n            )}\n        </div>\n    );\n}","import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport SquareContainer from './SquareContainer';\nimport Button from './Button';\nimport Result from './Result';\nimport ResultGuide from './ResultGuide';\nimport { getSimplifiedImage, getResult } from './util';\nimport { useTitle, useSelector } from \"./hooks\";\n\nexport default function ResultPage(props) {\n    const history = useHistory();\n    const convert = useCallback((initialColor) => {\n        return initialColor.map((color) => {\n            return [\n                parseInt(color.substr(1,2), 16),\n                parseInt(color.substr(3,2), 16),\n                parseInt(color.substr(5,2), 16),\n                255,\n            ];\n        });\n    }, []);\n    const {\n        data,\n        imageWidth,\n        imageHeight,\n        width,\n        initialColor: rawInitialColor,\n        initialEdge: rawInitialEdge,\n        iterationCount,\n        sampleDistance,\n    } = useSelector((state) => state.settings);\n    const initialColor = useMemo(() => convert(rawInitialColor), [convert, rawInitialColor]);\n    const initialEdge = useMemo(() => convert(rawInitialEdge), [convert, rawInitialEdge]);\n    const [imageData, setImageData] = useState();\n    \n    useTitle(\"Pixelator | Result\");\n    useEffect(() => {\n        const getImage = async () => {\n            const image = await getSimplifiedImage(data, imageWidth, imageHeight, width, sampleDistance, initialEdge);\n            const clustered = await getResult(image, initialColor, iterationCount);\n            setImageData(clustered);\n        };\n        getImage();\n    }, [\n        data,\n        imageWidth,\n        imageHeight,\n        width,\n        initialColor,\n        initialEdge,\n        iterationCount,\n        sampleDistance\n    ]);\n    \n    const mapping = {};\n    if (imageData) {\n        for (var i=0; i<imageData.length; i+=4) {\n            const colorString = `rgb(${imageData[i]}, ${imageData[i+1]}, ${imageData[i+2]})`;\n            if (mapping[colorString]) {\n                mapping[colorString]++;\n            } else {\n                mapping[colorString] = 1;\n            }\n        }\n    }\n    \n    return (\n        <>\n            <SquareContainer\n                square={\n                    <Result\n                        data={imageData}\n                        width={width}\n                        height={Math.floor(imageHeight/Math.floor(imageWidth/width))}\n                    />\n                }\n                other={\n                    <>\n                        <Button onClick={history.goBack}>Go Back</Button>\n                        <ResultGuide mapping={mapping} />\n                    </>\n                }\n            />\n        </>\n    );\n}","const reducer = (state, action) => {\n    switch (action.type) {\n        case \"save_settings\":\n            return Object.assign({}, state, { settings: action.payload });\n        default:\n            return state;\n    }\n};\n\nexport default reducer;","const defaultState = {\n    settings: {\n        width: 20,\n        initialColor: ['#000000', '#FFFFFF', '#FFFF00', '#FF0000'],\n        initialEdge: ['#000000'],\n        iterationCount: 50,\n        sampleDistance: 1,\n    }\n};\n\nexport default defaultState;","import React, { useReducer } from 'react';\nimport InputPage from './InputPage';\nimport ResultPage from './ResultPage';\nimport './App.css';\n\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\n\nimport reducer from './reducer';\nimport defaultState from './defaultState';\n\nexport const AppContext = React.createContext();\nexport const DispatchContext = React.createContext();\n\nfunction App() {\n    const [state, dispatch] = useReducer(reducer, defaultState);\n    \n    return (\n        <AppContext.Provider value={state}>\n            <DispatchContext.Provider value={dispatch}>\n                <BrowserRouter basename={process.env.PUBLIC_URL}>\n                    <Switch>\n                        <Route exact={true} path=\"/result\">\n                            <ResultPage />\n                        </Route>\n                        <Route exact={true} path=\"/\">\n                            <InputPage />\n                        </Route>\n                    </Switch>\n                </BrowserRouter>\n            </DispatchContext.Provider>\n        </AppContext.Provider>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}