(this.webpackJsonppixelator=this.webpackJsonppixelator||[]).push([[0],{19:function(e,t,n){e.exports=n(34)},24:function(e,t,n){},25:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),i=(n(24),n(8)),u=n(9),l=n(10),s=n(5);n(25);function f(e){var t=e.onSubmit,n=Object(a.useState)(0),c=Object(s.a)(n,2),o=c[0],f=c[1],h=Object(a.useState)(0),d=Object(s.a)(h,2),m=d[0],b=d[1],p=Object(a.useState)(20),v=Object(s.a)(p,2),g=v[0],w=v[1],E=Object(a.useState)({nextIndex:4,color:{1:"#000000",2:"#FFFFFF",3:"#FFFF00",4:"#FF0000"},id:[1,2,3,4]}),j=Object(s.a)(E,2),x=j[0],y=j[1],O=Object(a.useState)(),k=Object(s.a)(O,2),C=k[0],F=k[1],A=Object(a.useRef)(),S=Object(a.useCallback)((function(e){var t=new FileReader;t.onload=function(){return n.src=t.result},t.readAsDataURL(e.target.files[0]);var n=new Image;n.onload=function(){if(f(n.width),b(n.height),A.current){var e=A.current.getContext("2d");e.drawImage(n,0,0,n.width,n.height),F(e.getImageData(0,0,n.width,n.height).data)}}}),[A,F,f,b]),I=Object(a.useCallback)((function(e){w(e.target.value)}),[w]),M=Object(a.useCallback)((function(e){var t=e.target.name,n=e.target.value;y((function(e){var a=Object.assign({},e.color);return a[t]=n,Object(l.a)({},e,{color:a})}))}),[y]),N=Object(a.useCallback)((function(e){y((function(e){return Object(l.a)({},e,{nextIndex:e.nextIndex+1,id:[].concat(Object(u.a)(e.id),[e.nextIndex]),color:Object(l.a)({},e.color,Object(i.a)({},e.nextIndex,"#000000"))})}))}),[y]),W=Object(a.useCallback)((function(e){e.preventDefault(),t&&t(C,o,m,Number(g),Object.values(x.color))}),[t,g,C,o,m,x]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:S}),"Width:",r.a.createElement("input",{type:"number",onChange:I,value:g}),r.a.createElement("button",{onClick:W},"Submit")),r.a.createElement("div",null,r.a.createElement("button",{onClick:N},"Add color"),x.id.map((function(e){return r.a.createElement("input",{key:e.toString(),type:"color",value:x.color[e],name:e,onChange:M})}))),r.a.createElement("div",null,r.a.createElement("canvas",{ref:A,width:o.toString(),height:m.toString()})))}var h=n(4);function d(e){var t=Object(h.f)(),n=Object(a.useCallback)((function(e){return e.map((function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16),255]}))}),[]),c=Object(a.useCallback)((function(e,a,r,c,o){t.push({pathname:"/result",state:{data:e,imageWidth:a,imageHeight:r,width:c,initialColor:n(o)}})}),[t,n]);return r.a.createElement("div",{className:"container"},r.a.createElement(f,{onSubmit:c}))}var m=n(3),b=n.n(m);n(32);function p(e){var t=e.data,n=e.width,a=e.height;if(!t)return r.a.createElement("div",null);for(var c=[],o=0;o<a;o++){c.push([]);for(var i=0;i<n;i++){var u=4*(o*n+i),l=t.slice(u,u+4);c[o].push(r.a.createElement("div",{key:"".concat(o," ").concat(i),style:{backgroundColor:"rgb(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")"),width:"calc(100% / ".concat(n,")"),flex:"0 0 auto"}}))}}return r.a.createElement("div",{className:"result-container"},c.map((function(e,t){return r.a.createElement("div",{className:"result-line",style:{width:"100%",height:"calc(100% / ".concat(n,")")},key:t.toString()},e)})))}function v(e){var t=new Array(256).fill(0),n=new Array(256).fill(0),a=new Array(256).fill(0),r=new Array(256).fill(0);return e.forEach((function(e,c){switch(c%4){case 0:t[e]++;break;case 1:n[e]++;break;case 2:a[e]++;break;case 3:r[e]++}})),[t,n,a,r].map((function(t){for(var n=0,a=0;a<256;a++)if((n+=t[a])>=e.length/8)return a;return 255}))}function g(e,t,n,a){var r,c,o,i,u,l,s,f;return b.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:for(r=Math.floor(t/a),c=Math.floor(n/r),o=new Array(a*c),i=0;i<c;i++)for(u=0;u<a;u++)for(l=i*r;l<(i+1)*r;l++)for(s=u*r;s<(u+1)*r;s++)o[i*a+u]||(o[i*a+u]=[]),f=l*t+s,o[i*a+u].push(e.slice(4*f,4*f+4));return h.abrupt("return",o.map((function(e){return v(e.reduce((function(e,t){return Array.from(e).concat(Array.from(t))})))})).reduce((function(e,t){return e.concat(t)})));case 5:case"end":return h.stop()}}))}function w(e,t){var n,a,r;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:for(n=[],a=function(e){var t=e[3]/255;return t?[e[0]*t,e[1]*t,e[2]*t,255]:new Array(4).fill(255)},r=0;r<e.length;r+=4)n.push(a(e.slice(r,r+4)));return c.abrupt("return",new Promise((function(e){return e(x(n,(function(e,t){for(var n=0,a=0;a<3;a++)n+=(e[a]-t[a])*(e[a]-t[a]);return n}),t))})));case 4:case"end":return c.stop()}}))}function E(e,t){var n,a,r,c;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,b.a.awrap(w(e,t));case 2:for(c in n=o.sent,a=n.centroid,r=n.types)e.splice.apply(e,[4*c,4].concat(Object(u.a)(a[r[c]])));return o.next=8,b.a.awrap(e);case 8:return o.abrupt("return",o.sent);case 9:case"end":return o.stop()}}))}var j=function(e,t){for(var n=0;n<t;n++)e(n)};function x(e,t,n){var a=n,r=e.map((function(e,t){return 0})),c=n.length;return j((function(){for(var o=new Array(c).fill(new Array(n[0].length).fill(0)),i=new Array(c).fill(0),u=function(n){var c=function(e,t,n){var a=-1,r=-1;return t.forEach((function(t,c){var o=n(e,t);(o<r||-1===r)&&(a=c,r=o)})),a}(e[n],a,t);r[n]=c,o[c]=o[c].map((function(t,a){return t+e[n][a]})),i[c]++},l=0;l<e.length;l++)u(l);a=o.map((function(e,t){return e.map((function(e){return e/Math.max(1,i[t])}))}))}),100),{centroid:a,types:r}}function y(e){var t=Object(h.g)().state,n=t.data,c=t.imageWidth,o=t.imageHeight,i=t.width,u=t.initialColor,l=Object(a.useState)(),f=Object(s.a)(l,2),d=f[0],m=f[1];Object(a.useEffect)((function(){!function(){var e,t;b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(g(n,c,o,i));case 2:return e=a.sent,a.next=5,b.a.awrap(E(e,u));case 5:t=a.sent,m(t);case 7:case"end":return a.stop()}}))}()}),[n,c,o,i,u]);var v=Math.min(window.innerWidth,window.innerHeight)-80,w={};if(d)for(var j=0;j<d.length;j+=4){var x="rgb(".concat(d[j],", ").concat(d[j+1],", ").concat(d[j+2],")");w[x]?w[x]++:w[x]=1}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"left",style:{width:"".concat(v,"px"),height:"".concat(v,"px")}},r.a.createElement(p,{data:d,width:i,height:Math.floor(o/Math.floor(c/i))})),Object.keys(w).map((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:e,width:"50px",height:"50px",border:"1px solid black",display:"inline-block"}}),r.a.createElement("span",null,w[e]))})))}n(33);var O=n(7);var k=function(){return r.a.createElement(O.a,{basename:"/Pixelator"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/result"},r.a.createElement(y,null)),r.a.createElement(h.a,{exact:!0,path:"/"},r.a.createElement(d,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.d0f08efb.chunk.js.map