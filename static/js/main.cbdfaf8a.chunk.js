(this.webpackJsonppixelator=this.webpackJsonppixelator||[]).push([[0],{19:function(e,t,a){e.exports=a(36)},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=(a(24),a(8)),u=a(9),i=a(6),s=a(3),f=(a(25),r.a.forwardRef((function(e,t){return r.a.createElement("button",Object.assign({ref:t},e,{className:"button"}))})));a(26);function m(e){var t=e.square,a=e.other;return r.a.createElement("div",{className:"square-container"},r.a.createElement("div",{className:"square-other"},a),r.a.createElement("div",{className:"square-block"},t))}function d(e){var t=e.onSubmit,a=Object(n.useState)(0),c=Object(s.a)(a,2),l=c[0],d=c[1],b=Object(n.useState)(0),h=Object(s.a)(b,2),p=h[0],v=h[1],g=Object(n.useState)(20),E=Object(s.a)(g,2),j=E[0],O=E[1],w=Object(n.useState)({nextIndex:5,color:{1:"#000000",2:"#FFFFFF",3:"#FFFF00",4:"#FF0000"},id:[1,2,3,4]}),x=Object(s.a)(w,2),y=x[0],k=x[1],C=Object(n.useState)({nextIndex:1,edge:{},id:[]}),I=Object(s.a)(C,2),S=I[0],F=I[1],N=Object(n.useState)(),A=Object(s.a)(N,2),D=A[0],R=A[1],q=Object(n.useState)(50),W=Object(s.a)(q,2),B=W[0],M=W[1],H=Object(n.useState)(1),P=Object(s.a)(H,2),J=P[0],_=P[1],G=Object(n.useRef)(),L=Object(n.useRef)(),U=Object(n.useCallback)((function(e){e.preventDefault(),L.current.click()}),[L]),$=Object(n.useCallback)((function(e){var t=new FileReader;t.onload=function(){return a.src=t.result},t.readAsDataURL(e.target.files[0]);var a=new Image;a.onload=function(){if(d(a.width),v(a.height),G.current){var e=G.current.getContext("2d");e.drawImage(a,0,0,a.width,a.height),R(e.getImageData(0,0,a.width,a.height).data)}}}),[G,R,d,v]),z=Object(n.useCallback)((function(e){O(e.target.value)}),[O]),K=Object(n.useCallback)((function(e){e.preventDefault();var t=e.target.name,a=e.target.value;k((function(e){var n=Object.assign({},e.color);return n[t]=a,Object(i.a)({},e,{color:n})}))}),[k]),Q=Object(n.useCallback)((function(e){e.preventDefault(),k((function(e){return Object(i.a)({},e,{nextIndex:e.nextIndex+1,id:[].concat(Object(u.a)(e.id),[e.nextIndex]),color:Object(i.a)({},e.color,Object(o.a)({},e.nextIndex,"#000000"))})}))}),[k]),T=Object(n.useCallback)((function(e){e.preventDefault();var t=e.target.name,a=e.target.value;F((function(e){var n=Object.assign({},e.edge);return n[t]=a,Object(i.a)({},e,{edge:n})}))}),[F]),V=Object(n.useCallback)((function(e){e.preventDefault(),F((function(e){return Object(i.a)({},e,{nextIndex:e.nextIndex+1,id:[].concat(Object(u.a)(e.id),[e.nextIndex]),edge:Object(i.a)({},e.edge,Object(o.a)({},e.nextIndex,"#000000"))})}))}),[F]),X=Object(n.useCallback)((function(e){e.preventDefault(),M(e.target.value)}),[]),Y=Object(n.useCallback)((function(e){e.preventDefault(),_(e.target.value)}),[]),Z=Object(n.useCallback)((function(e){e.preventDefault(),t&&t(D,l,p,Number(j),Object.values(y.color),Object.values(S.edge),Number(B),Number(J))}),[t,j,D,l,p,y,S,B,J]);return r.a.createElement(m,{other:r.a.createElement("form",{className:"form",onSubmit:Z},r.a.createElement("h3",null,"Instructions:"),r.a.createElement("span",null,"Select an image with few colors and sufficiently wide margin."),r.a.createElement("span",null,"Choose the main colors in the image."),r.a.createElement("span",null,"Choose the color of the edge if necessary."),r.a.createElement("span",null,"Increase sample distance if the calculation is too slow."),r.a.createElement("input",{className:"hidden",ref:L,type:"file",onChange:$}),r.a.createElement(f,{onClick:U},"Choose an image"),r.a.createElement("div",null,r.a.createElement("label",null,"Width:"),r.a.createElement("input",{type:"number",onChange:z,value:j})),r.a.createElement("div",null,r.a.createElement("label",null,"Iteration Count:"),r.a.createElement("input",{type:"number",onChange:X,value:B})),r.a.createElement("div",null,r.a.createElement("label",null,"Sample Distance:"),r.a.createElement("input",{type:"number",onChange:Y,value:J})),r.a.createElement("div",null,r.a.createElement(f,{onClick:Q},"Add color"),y.id.map((function(e){return r.a.createElement("input",{key:"color_".concat(e),type:"color",value:y.color[e],name:e,onChange:K})}))),r.a.createElement("div",null,r.a.createElement(f,{onClick:V},"Add Edge"),S.id.map((function(e){return r.a.createElement("input",{key:"edge_".concat(e),type:"color",value:S.edge[e],name:e,onChange:T})}))),r.a.createElement(f,{disabled:!D,type:"submit"},"Submit")),square:r.a.createElement("div",{className:"overflow-scroll full"},r.a.createElement("canvas",{ref:G,width:l.toString(),height:p.toString()}))})}var b=function(e){Object(n.useEffect)((function(){document.title=e}),[e])},h=a(4),p=a.n(h);function v(e,t){var a=new Array(256).fill(0),n=new Array(256).fill(0),r=new Array(256).fill(0),c=new Array(256).fill(0),l=!0,o=!1,u=void 0;try{for(var i,s=t[Symbol.iterator]();!(l=(i=s.next()).done);l=!0){for(var f=i.value,m=e.length/4,d=0,b=0;b<e.length;b+=4){E(e.slice(b,b+4),f)<30&&d++}if(d>.03*m)return f}}catch(h){o=!0,u=h}finally{try{l||null==s.return||s.return()}finally{if(o)throw u}}return e.forEach((function(e,t){switch(t%4){case 0:a[e]++;break;case 1:n[e]++;break;case 2:r[e]++;break;case 3:c[e]++}})),[a,n,r,c].map((function(t){for(var a=0,n=0;n<256;n++)if((a+=t[n])>=e.length/8)return n;return 255}))}function g(e,t,a,n,r,c){var l,o,u,i,s,f,m,d;return p.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:for(l=Math.floor(t/n),o=Math.floor(a/l),u=new Array(n*o),i=0;i<o;i++)for(s=0;s<n;s++)for(f=i*l;f<(i+1)*l;f+=r)for(m=s*l;m<(s+1)*l;m+=r)u[i*n+s]||(u[i*n+s]=[]),d=f*t+m,u[i*n+s].push(e.slice(4*d,4*d+4));return b.abrupt("return",u.map((function(e){return v(e.reduce((function(e,t){return Array.from(e).concat(Array.from(t))})),c)})).reduce((function(e,t){return e.concat(t)})));case 5:case"end":return b.stop()}}))}function E(e,t){for(var a=0,n=0;n<3;n++)a+=(e[n]-t[n])*(e[n]-t[n]);return a}function j(e){var t=e[3]/255;return t?[e[0]*t,e[1]*t,e[2]*t,255]:new Array(4).fill(255)}function O(e,t,a){var n,r;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:for(n=[],r=0;r<e.length;r+=4)n.push(j(e.slice(r,r+4)));return c.abrupt("return",new Promise((function(e){return e(y(n,E,t,a))})));case 3:case"end":return c.stop()}}))}function w(e,t,a){var n,r,c,l;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,p.a.awrap(O(e,t,a));case 2:for(l in n=o.sent,r=n.centroid,c=n.types)e.splice.apply(e,[4*l,4].concat(Object(u.a)(r[c[l]])));return o.next=8,p.a.awrap(e);case 8:return o.abrupt("return",o.sent);case 9:case"end":return o.stop()}}))}var x=function(e,t){for(var a=0;a<t;a++)e(a)};function y(e,t,a,n){var r=a,c=e.map((function(e,t){return 0})),l=a.length;return x((function(){for(var n=new Array(l).fill(new Array(a[0].length).fill(0)),o=new Array(l).fill(0),u=function(a){var l=function(e,t,a){var n=-1,r=-1;return t.forEach((function(t,c){var l=a(e,t);(l<r||-1===r)&&(n=c,r=l)})),n}(e[a],r,t);c[a]=l,n[l]=n[l].map((function(t,n){return t+e[a][n]})),o[l]++},i=0;i<e.length;i++)u(i);r=n.map((function(e,t){return e.map((function(e){return 0!==o[t]?e/o[t]:r[t]}))}))}),n),{centroid:r,types:c}}var k=a(5);function C(e){var t=Object(k.f)(),a=Object(n.useCallback)((function(e){return e.map((function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16),255]}))}),[]),c=Object(n.useCallback)((function(e,n,r,c,l,o,u,i){for(var s=0;s<e.length;s+=4){var f=j(e.slice(s,s+4));e[s]=f[0],e[s+1]=f[1],e[s+2]=f[2],e[s+3]=f[3]}t.push({pathname:"/result",state:{data:e,imageWidth:n,imageHeight:r,width:c,initialColor:a(l),initialEdge:a(o),iterationCount:u,sampleDistance:i}})}),[t,a]);return b("Pixelator"),r.a.createElement("div",{className:"container"},r.a.createElement(d,{onSubmit:c}))}a(33);function I(e){var t=e.data,a=e.width,n=e.height;if(!t)return r.a.createElement("div",null);for(var c=[],l=0;l<n;l++){c.push([]);for(var o=0;o<a;o++){var u=4*(l*a+o),i=t.slice(u,u+4);c[l].push(r.a.createElement("div",{key:"".concat(l," ").concat(o),style:{backgroundColor:"rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")"),width:"calc(100% / ".concat(a,")"),paddingBottom:"calc(100% / ".concat(a,")"),flex:"0 0 auto"}}))}}return r.a.createElement("div",{className:"result-container"},c.map((function(e,t){return r.a.createElement("div",{className:"result-line",key:t.toString()},e)})))}a(34);function S(e){var t=e.mapping;return r.a.createElement("div",{className:"result-guide-container"},Object.keys(t).map((function(e){return r.a.createElement("div",{key:e.toString(),className:"result-guide-item"},r.a.createElement("div",{style:{backgroundColor:e,width:"50px",height:"50px",minWidth:"50px",minHeight:"50px",border:"1px solid black",marginRight:"8px"}}),r.a.createElement("p",null,t[e]))})))}function F(e){var t=Object(k.g)(),a=Object(k.f)(),c=t.state,l=c.data,o=c.imageWidth,u=c.imageHeight,i=c.width,d=c.initialColor,h=c.initialEdge,v=c.iterationCount,E=c.sampleDistance,j=Object(n.useState)(),O=Object(s.a)(j,2),x=O[0],y=O[1];b("Pixelator | Result"),Object(n.useEffect)((function(){!function(){var e,t;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(g(l,o,u,i,E,h));case 2:return e=a.sent,a.next=5,p.a.awrap(w(e,d,v));case 5:t=a.sent,y(t);case 7:case"end":return a.stop()}}))}()}),[l,o,u,i,d,h,v,E]);var C={};if(x)for(var F=0;F<x.length;F+=4){var N="rgb(".concat(x[F],", ").concat(x[F+1],", ").concat(x[F+2],")");C[N]?C[N]++:C[N]=1}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{square:r.a.createElement(I,{data:x,width:i,height:Math.floor(u/Math.floor(o/i))}),other:r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{onClick:a.goBack},"Go Back"),r.a.createElement(S,{mapping:C}))}))}a(35);var N=a(10);var A=function(){return r.a.createElement(N.a,{basename:"/pixelator"},r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/result"},r.a.createElement(F,null)),r.a.createElement(k.a,{exact:!0,path:"/"},r.a.createElement(C,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.cbdfaf8a.chunk.js.map