(this.webpackJsonppixelator=this.webpackJsonppixelator||[]).push([[0],{19:function(e,t,a){e.exports=a(36)},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),u=(a(24),a(8)),i=a(9),l=a(10),s=a(5),f=(a(25),r.a.forwardRef((function(e,t){return r.a.createElement("button",Object.assign({ref:t},e,{className:"button"}))})));a(26);function m(e){var t=e.square,a=e.other;return r.a.createElement("div",{className:"square-container"},r.a.createElement("div",{className:"square-other"},a),r.a.createElement("div",{className:"square-block"},t))}function d(e){var t=e.onSubmit,a=Object(n.useState)(0),c=Object(s.a)(a,2),o=c[0],d=c[1],b=Object(n.useState)(0),h=Object(s.a)(b,2),p=h[0],v=h[1],g=Object(n.useState)(20),E=Object(s.a)(g,2),w=E[0],j=E[1],O=Object(n.useState)({nextIndex:5,color:{1:"#000000",2:"#FFFFFF",3:"#FFFF00",4:"#FF0000"},id:[1,2,3,4]}),x=Object(s.a)(O,2),y=x[0],k=x[1],C=Object(n.useState)(),F=Object(s.a)(C,2),S=F[0],A=F[1],N=Object(n.useRef)(),I=Object(n.useRef)(),R=Object(n.useCallback)((function(e){e.preventDefault(),I.current.click()}),[I]),q=Object(n.useCallback)((function(e){var t=new FileReader;t.onload=function(){return a.src=t.result},t.readAsDataURL(e.target.files[0]);var a=new Image;a.onload=function(){if(d(a.width),v(a.height),N.current){var e=N.current.getContext("2d");e.drawImage(a,0,0,a.width,a.height),A(e.getImageData(0,0,a.width,a.height).data)}}}),[N,A,d,v]),D=Object(n.useCallback)((function(e){j(e.target.value)}),[j]),W=Object(n.useCallback)((function(e){e.preventDefault();var t=e.target.name,a=e.target.value;k((function(e){var n=Object.assign({},e.color);return n[t]=a,Object(l.a)({},e,{color:n})}))}),[k]),B=Object(n.useCallback)((function(e){e.preventDefault(),k((function(e){return Object(l.a)({},e,{nextIndex:e.nextIndex+1,id:[].concat(Object(i.a)(e.id),[e.nextIndex]),color:Object(l.a)({},e.color,Object(u.a)({},e.nextIndex,"#000000"))})}))}),[k]),M=Object(n.useCallback)((function(e){e.preventDefault(),t&&t(S,o,p,Number(w),Object.values(y.color))}),[t,w,S,o,p,y]);return r.a.createElement(m,{other:r.a.createElement("form",{className:"form",onSubmit:M},r.a.createElement("input",{className:"hidden",ref:I,type:"file",onChange:q}),r.a.createElement(f,{onClick:R},"Choose an image"),r.a.createElement("div",null,r.a.createElement("label",null,"Width:"),r.a.createElement("input",{type:"number",onChange:D,value:w})),r.a.createElement("div",null,r.a.createElement(f,{onClick:B},"Add color"),y.id.map((function(e){return r.a.createElement("input",{key:e.toString(),type:"color",value:y.color[e],name:e,onChange:W})}))),r.a.createElement(f,{disabled:!S,type:"submit"},"Submit")),square:r.a.createElement("div",{className:"overflow-scroll full"},r.a.createElement("canvas",{ref:N,width:o.toString(),height:p.toString()}))})}var b=a(4);function h(e){var t=Object(b.f)(),a=Object(n.useCallback)((function(e){return e.map((function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16),255]}))}),[]),c=Object(n.useCallback)((function(e,n,r,c,o){t.push({pathname:"/result",state:{data:e,imageWidth:n,imageHeight:r,width:c,initialColor:a(o)}})}),[t,a]);return Object(n.useEffect)((function(){document.title="Pixelator"}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(d,{onSubmit:c}))}var p=a(3),v=a.n(p);a(33);function g(e){var t=e.data,a=e.width,n=e.height;if(!t)return r.a.createElement("div",null);for(var c=[],o=0;o<n;o++){c.push([]);for(var u=0;u<a;u++){var i=4*(o*a+u),l=t.slice(i,i+4);c[o].push(r.a.createElement("div",{key:"".concat(o," ").concat(u),style:{backgroundColor:"rgb(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")"),width:"calc(100% / ".concat(a,")"),paddingBottom:"calc(100% / ".concat(a,")"),flex:"0 0 auto"}}))}}return r.a.createElement("div",{className:"result-container"},c.map((function(e,t){return r.a.createElement("div",{className:"result-line",key:t.toString()},e)})))}a(34);function E(e){var t=e.mapping;return r.a.createElement("div",{className:"result-guide-container"},Object.keys(t).map((function(e){return r.a.createElement("div",{className:"result-guide-item"},r.a.createElement("div",{style:{backgroundColor:e,width:"50px",height:"50px",minWidth:"50px",minHeight:"50px",border:"1px solid black",marginRight:"8px"}}),r.a.createElement("p",null,t[e]))})))}function w(e){var t=new Array(256).fill(0),a=new Array(256).fill(0),n=new Array(256).fill(0),r=new Array(256).fill(0);return e.forEach((function(e,c){switch(c%4){case 0:t[e]++;break;case 1:a[e]++;break;case 2:n[e]++;break;case 3:r[e]++}})),[t,a,n,r].map((function(t){for(var a=0,n=0;n<256;n++)if((a+=t[n])>=e.length/8)return n;return 255}))}function j(e,t,a,n){var r,c,o,u,i,l,s,f;return v.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:for(r=Math.floor(t/n),c=Math.floor(a/r),o=new Array(n*c),u=0;u<c;u++)for(i=0;i<n;i++)for(l=u*r;l<(u+1)*r;l++)for(s=i*r;s<(i+1)*r;s++)o[u*n+i]||(o[u*n+i]=[]),f=l*t+s,o[u*n+i].push(e.slice(4*f,4*f+4));return m.abrupt("return",o.map((function(e){return w(e.reduce((function(e,t){return Array.from(e).concat(Array.from(t))})))})).reduce((function(e,t){return e.concat(t)})));case 5:case"end":return m.stop()}}))}function O(e,t){var a,n,r;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:for(a=[],n=function(e){var t=e[3]/255;return t?[e[0]*t,e[1]*t,e[2]*t,255]:new Array(4).fill(255)},r=0;r<e.length;r+=4)a.push(n(e.slice(r,r+4)));return c.abrupt("return",new Promise((function(e){return e(k(a,(function(e,t){for(var a=0,n=0;n<3;n++)a+=(e[n]-t[n])*(e[n]-t[n]);return a}),t))})));case 4:case"end":return c.stop()}}))}function x(e,t){var a,n,r,c;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,v.a.awrap(O(e,t));case 2:for(c in a=o.sent,n=a.centroid,r=a.types)e.splice.apply(e,[4*c,4].concat(Object(i.a)(n[r[c]])));return o.next=8,v.a.awrap(e);case 8:return o.abrupt("return",o.sent);case 9:case"end":return o.stop()}}))}var y=function(e,t){for(var a=0;a<t;a++)e(a)};function k(e,t,a){var n=a,r=e.map((function(e,t){return 0})),c=a.length;return y((function(){for(var o=new Array(c).fill(new Array(a[0].length).fill(0)),u=new Array(c).fill(0),i=function(a){var c=function(e,t,a){var n=-1,r=-1;return t.forEach((function(t,c){var o=a(e,t);(o<r||-1===r)&&(n=c,r=o)})),n}(e[a],n,t);r[a]=c,o[c]=o[c].map((function(t,n){return t+e[a][n]})),u[c]++},l=0;l<e.length;l++)i(l);n=o.map((function(e,t){return e.map((function(e){return e/Math.max(1,u[t])}))}))}),100),{centroid:n,types:r}}function C(e){var t=Object(b.g)(),a=Object(b.f)(),c=t.state,o=c.data,u=c.imageWidth,i=c.imageHeight,l=c.width,d=c.initialColor,h=Object(n.useState)(),p=Object(s.a)(h,2),w=p[0],O=p[1];Object(n.useEffect)((function(){document.title="Pixelator | Result"}),[]),Object(n.useEffect)((function(){!function(){var e,t;v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(j(o,u,i,l));case 2:return e=a.sent,a.next=5,v.a.awrap(x(e,d));case 5:t=a.sent,O(t);case 7:case"end":return a.stop()}}))}()}),[o,u,i,l,d]);var y={};if(w)for(var k=0;k<w.length;k+=4){var C="rgb(".concat(w[k],", ").concat(w[k+1],", ").concat(w[k+2],")");y[C]?y[C]++:y[C]=1}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{square:r.a.createElement(g,{data:w,width:l,height:Math.floor(i/Math.floor(u/l))}),other:r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{onClick:a.goBack},"Go Back"),r.a.createElement(E,{mapping:y}))}))}a(35);var F=a(7);var S=function(){return r.a.createElement(F.a,{basename:"/Pixelator"},r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/result"},r.a.createElement(C,null)),r.a.createElement(b.a,{exact:!0,path:"/"},r.a.createElement(h,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.87af9cbe.chunk.js.map